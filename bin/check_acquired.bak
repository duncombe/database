
# checks the contents of a directory againt the manifest of a data base.
# the manifest files or catalog of the database has shasums of all files in the database.
# chack shasums of files in the directory against the shasums in the database 
# print file names that are not in the manifest

MANIFEST=${1:?}
FOLDER=${2:?}

function check_file(){
	SHASUM=`shasum "$1" | cut -f1 -d\ `
	grep $SHASUM $MANIFEST > /dev/null || echo "$1"  
	}

export -f check_file

find $FOLDER -type f -exec bash -c 'check_file "$0"' \{\} \: 




